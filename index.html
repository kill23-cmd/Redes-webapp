<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerenciador Remoto Zabbix - Dashboard</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/components.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=JetBrains+Mono:wght@400&display=swap"
        rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
</head>

<body>
    <header class="app-header">
        <div class="header-content">
            <h1 class="app-title">Gerenciador Remoto Zabbix</h1>
            <div class="device-selector">
                <label for="device-select">Dispositivo:</label>
                <select id="device-select" class="device-select">
                    <option value="">-- Selecione --</option>
                </select>
                <button class="settings-btn" title="Configurações"><i data-lucide="settings"></i></button>
            </div>
        </div>
    </header>

    <main class="main-content">
        <aside class="left-panel">
            <div class="panel-section">
                <h3 class="section-title">Busca Rápida</h3>
                <div class="search-group">
                    <label>Loja:</label>
                    <input type="text" id="store-search" class="search-input" placeholder="Nome da loja...">
                </div>
                <div class="search-group">
                    <label>Circuito (WAN1/2):</label>
                    <input type="text" id="circuit-search" class="search-input" placeholder="Circuito...">
                </div>
                <div class="search-actions">
                    <button id="clear-search" class="btn btn-secondary">Limpar Filtro</button>
                </div>
            </div>

            <div class="panel-section">
                <h3 class="section-title">Loja</h3>
                <select id="store-select" class="store-select">
                    <option value="">-- Selecione uma loja --</option>
                </select>
            </div>

            <div class="panel-section">
                <h3 class="section-title">Hosts</h3>
                <div class="hosts-list" id="hosts-list"></div>
            </div>

            <div class="panel-section">
                <h3 class="section-title">Informações do Link (Planilha)</h3>
                <div class="link-info-grid">
                    <div class="info-item"><label>WAN1 Op:</label><span id="wan1-op">--</span></div>
                    <div class="info-item"><label>WAN2 Op:</label><span id="wan2-op">--</span></div>
                    <div class="info-item"><label>WAN1 Circ:</label><span id="wan1-circ">--</span></div>
                    <div class="info-item"><label>WAN2 Circ:</label><span id="wan2-circ">--</span></div>
                    <div class="info-item"><label>WAN1 Banda:</label><span id="wan1-banda">--</span></div>
                    <div class="info-item"><label>WAN2 Banda:</label><span id="wan2-banda">--</span></div>
                </div>
            </div>

            <div class="panel-section">
                <h3 class="section-title">Host Status</h3>
                <div class="status-grid" id="status-grid">
                    <div class="status-item"><label>Disponibilidade:</label><span id="sidebar-uptime">--</span></div>
                    <div class="status-item"><label>CPU:</label><span id="sidebar-cpu">--</span></div>
                    <div class="status-item"><label>Latência:</label><span id="sidebar-latency">--</span></div>
                    <div class="status-item"><label>Perda de Pacotes:</label><span id="sidebar-loss">--</span></div>
                    <div class="status-item" id="sidebar-dynamic-1" style="display:none"><label>WAN1
                            Status:</label><span>--</span></div>
                    <div class="status-item" id="sidebar-dynamic-2" style="display:none"><label>WAN2
                            Status:</label><span>--</span></div>
                    <div class="status-item" id="sidebar-dynamic-3" style="display:none"><label>Dynamic
                            3:</label><span>--</span></div>
                    <div class="status-item" id="sidebar-dynamic-4" style="display:none"><label>Dynamic
                            4:</label><span>--</span></div>
                </div>
            </div>
        </aside>

        <section class="right-panel">
            <div class="dashboard-grid">
                <div class="collapsible-section">
                    <div class="collapsible-header" onclick="toggleSection(this)">
                        <h2 class="section-title"><i data-lucide="check"></i> Status Host</h2>
                        <i data-lucide="chevron-down" class="chevron"></i>
                    </div>
                    <div class="collapsible-content">
                        <div class="status-cards-grid">
                            <div class="status-card">
                                <div class="card-header">
                                    <h4>Disponibilidade</h4>
                                </div>
                                <div class="availability-content">
                                    <div class="status-indicator" id="card-status-indicator">
                                        <div class="status-dot"></div><span id="card-status-text">--</span>
                                    </div>
                                    <div class="metric-large" id="card-uptime">--</div>
                                    <div class="metric-row">
                                        <span class="metric-label">Perda:</span><span class="metric-value"
                                            id="card-loss">--</span>
                                    </div>
                                    <div class="metric-row">
                                        <span class="metric-label">Latência:</span><span class="metric-value"
                                            id="card-latency">--</span>
                                    </div>
                                </div>
                            </div>
                            <div class="status-card">
                                <div class="card-header">
                                    <h4>CPU</h4>
                                </div>
                                <div class="gauge-container">
                                    <canvas id="cpu-gauge" width="120" height="120"></canvas>
                                    <div class="gauge-center">
                                        <div class="gauge-value" id="cpu-gauge-value">0%</div>
                                    </div>
                                </div>
                            </div>
                            <div class="status-card">
                                <div class="card-header">
                                    <h4>Memória</h4>
                                </div>
                                <div class="gauge-container">
                                    <canvas id="memory-gauge" width="120" height="120"></canvas>
                                    <div class="gauge-center">
                                        <div class="gauge-value" id="memory-gauge-value">--</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="collapsible-section">
                    <div class="collapsible-header" onclick="toggleSection(this)">
                        <h2 class="section-title"><i data-lucide="network"></i> WAN e Links</h2>
                        <i data-lucide="chevron-down" class="chevron"></i>
                    </div>
                    <div class="collapsible-content">
                        <div class="wan-cards-grid">
                            <div class="wan-status-card">
                                <div class="wan-status">
                                    <div class="status-indicator" id="card-wan1-indicator">
                                        <div class="status-dot"></div><span id="card-wan1-status">--</span>
                                    </div>
                                </div>
                                <div class="wan-details">
                                    <div class="wan-title">WAN1</div>
                                    <div class="wan-type" id="card-wan1-duplex">--</div>
                                    <div class="wan-speed" id="card-wan1-speed">--</div>
                                    <div class="wan-type" style="font-size: 10px; margin-top: 5px;">
                                        Up: <span id="card-wan1-upload">--</span> | Down: <span
                                            id="card-wan1-download">--</span>
                                    </div>
                                </div>
                            </div>
                            <div class="wan-status-card">
                                <div class="wan-status">
                                    <div class="status-indicator" id="card-wan2-indicator">
                                        <div class="status-dot"></div><span id="card-wan2-status">--</span>
                                    </div>
                                </div>
                                <div class="wan-details">
                                    <div class="wan-title">WAN2</div>
                                    <div class="wan-type" id="card-wan2-duplex">--</div>
                                    <div class="wan-speed" id="card-wan2-speed">--</div>
                                    <div class="wan-type" style="font-size: 10px; margin-top: 5px;">
                                        Up: <span id="card-wan2-upload">--</span> | Down: <span
                                            id="card-wan2-download">--</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="ssh-panel">
                <div class="panel-header">
                    <h3>Comandos Remotos</h3>
                    <div class="action-buttons">
                        <button id="connect-putty" class="action-btn" title="PuTTY"><i
                                data-lucide="terminal"></i></button>
                        <button id="web-access" class="action-btn" title="Web"><i
                                data-lucide="external-link"></i></button>
                    </div>
                </div>
                <div class="command-controls">
                    <button id="select-all" class="btn btn-secondary">Todos</button>
                    <button id="deselect-all" class="btn btn-secondary">Nenhum</button>
                </div>
                <div class="commands-list" id="commands-list"></div>
                <div class="command-actions">
                    <button id="run-commands" class="btn btn-primary">Executar</button>
                </div>
            </div>
        </section>
    </main>

    <div id="settings-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Configurações</h3><button class="modal-close"><i data-lucide="x"></i></button>
            </div>
            <div class="modal-body">
                <div class="settings-section">
                    <h4>Zabbix</h4>
                    <div class="form-group"><label>URL:</label><input type="url" id="zabbix-url" class="form-input">
                    </div>
                    <div class="form-group"><label>User:</label><input type="text" id="zabbix-user" class="form-input">
                    </div>
                    <div class="form-group"><label>Pass:</label><input type="password" id="zabbix-pass"
                            class="form-input"></div>
                </div>
                <div class="settings-section">
                    <h4>SSH</h4>
                    <div class="form-group"><label>User:</label><input type="text" id="ssh-user" class="form-input">
                    </div>
                    <div class="form-group"><label>Pass:</label><input type="password" id="ssh-pass" class="form-input">
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="save-settings" class="btn btn-primary">Salvar</button>
                <button id="cancel-settings" class="btn btn-secondary">Cancelar</button>
            </div>
        </div>
    </div>
    <div id="loading-overlay" class="loading-overlay">
        <div class="loading-spinner"></div>
        <div class="loading-text">Carregando...</div>
    </div>

    <script src="js/utils.js"></script>
    <script src="js/config-manager.js"></script>
    <script src="js/zabbix-client.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="js/charts.js"></script>
    <script src="js/ssh-commands.js"></script>
    <script src="js/main.js"></script>
    <script>lucide.createIcons();</script>
</body>

</html>